[gd_scene load_steps=18 format=3 uid="uid://8jvrirsicmsi"]

[ext_resource type="Script" uid="uid://vhv7qld0px1u" path="res://camera_2d.gd" id="1_ktfr2"]
[ext_resource type="Script" uid="uid://dqhs7x6p66364" path="res://level/level.gd" id="1_l5lfc"]
[ext_resource type="PackedScene" uid="uid://cktgqcvf538ar" path="res://car/car.tscn" id="2_44x8d"]
[ext_resource type="Script" uid="uid://3ytb6gp6nt3p" path="res://canvas_modulate.gd" id="3_ivpvi"]
[ext_resource type="Script" uid="uid://50uuqk8bud68" path="res://level/ui/batteries.gd" id="4_0v1st"]
[ext_resource type="Script" uid="uid://d1c7v6q8ib1i8" path="res://level/level_generator.gd" id="5_6gtgk"]
[ext_resource type="Script" uid="uid://bawauf012neu6" path="res://level/level_objects.gd" id="5_fm1jd"]
[ext_resource type="Script" uid="uid://cqn5uoea710h7" path="res://level/ui/hud.gd" id="6_m3nah"]
[ext_resource type="AudioStream" uid="uid://dc22g7tfuntxe" path="res://music/main/bass.ogg" id="6_rhqlf"]
[ext_resource type="AudioStream" uid="uid://cvy57lielouj3" path="res://music/main/melody.ogg" id="7_l5lfc"]
[ext_resource type="AudioStream" uid="uid://dqwdbfu3sswpw" path="res://music/main/sfx.ogg" id="8_m3nah"]
[ext_resource type="Script" uid="uid://b7y01j2gn8i1o" path="res://level/ui/stat_tracker.gd" id="9_7jqyl"]
[ext_resource type="AudioStream" uid="uid://f75smqgej453" path="res://music/main/drums.ogg" id="9_fm1jd"]
[ext_resource type="AudioStream" uid="uid://bo158a1bh5w5v" path="res://music/main/arp.ogg" id="10_7jqyl"]
[ext_resource type="AudioStream" uid="uid://dba0mp1l2vavc" path="res://music/main/pad.ogg" id="11_m5ivw"]
[ext_resource type="Script" uid="uid://bnbia4jickmey" path="res://level/music.gd" id="12_sui6v"]

[sub_resource type="AudioStreamSynchronized" id="AudioStreamSynchronized_tv7ir"]
stream_count = 6
stream_0/stream = ExtResource("6_rhqlf")
stream_0/volume = 0.0
stream_1/stream = ExtResource("7_l5lfc")
stream_1/volume = 0.0
stream_2/stream = ExtResource("8_m3nah")
stream_2/volume = 0.0
stream_3/stream = ExtResource("9_fm1jd")
stream_3/volume = -60.0
stream_4/stream = ExtResource("10_7jqyl")
stream_4/volume = -60.0
stream_5/stream = ExtResource("11_m5ivw")
stream_5/volume = -60.0

[node name="Level" type="Node2D"]
script = ExtResource("1_l5lfc")
intermission_path = "res://menu/intermission.tscn"

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("car")]
offset = Vector2(0, -10)
script = ExtResource("1_ktfr2")
car = NodePath("../Car")
pan_speed = 10.0
look_ahead_threshold = 10.0
look_ahead_amount = 20.0
air_offset = -10.0
ground_offset = -30.0
offset_lerp_speed = 3.0

[node name="Car" parent="." instance=ExtResource("2_44x8d")]
position = Vector2(-462.99994, -110)
rotation = 1.00048
jump_cancel_multiplier = 0.55

[node name="LevelGenerator" type="Node2D" parent="." node_paths=PackedStringArray("car", "camera")]
script = ExtResource("5_6gtgk")
car = NodePath("../Car")
car_pos_offset = Vector2(16, -24)
camera = NodePath("../Camera2D")
slope_length = 1000.0
slope_angle = 0.25
level_length = 50000.0
level_depth = 1000.0
sample_rate = 10.0
hill_frequency = 0.1
max_hill_strength = 10000.0
bump_frequency = 5.0
bump_strength = 10.0

[node name="LevelObjects" type="Node2D" parent="." node_paths=PackedStringArray("level_generator", "camera")]
script = ExtResource("5_fm1jd")
level_generator = NodePath("../LevelGenerator")
camera = NodePath("../Camera2D")
object_chance = 0.03

[node name="CanvasModulate" type="CanvasModulate" parent="." node_paths=PackedStringArray("car")]
script = ExtResource("3_ivpvi")
car = NodePath("../Car")
darkness_color = Color(0.019607844, 0.023529412, 0.101960786, 1)

[node name="UI" type="CanvasLayer" parent="."]

[node name="HUD" type="MarginContainer" parent="UI"]
offset_right = 512.0
offset_bottom = 288.0
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 12
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 12
script = ExtResource("6_m3nah")

[node name="Batteries" type="VBoxContainer" parent="UI/HUD" node_paths=PackedStringArray("car")]
custom_minimum_size = Vector2(80, 0)
layout_mode = 2
size_flags_horizontal = 0
mouse_filter = 2
alignment = 2
script = ExtResource("4_0v1st")
car = NodePath("../../../Car")

[node name="Earnings" type="VBoxContainer" parent="UI/HUD"]
layout_mode = 2
size_flags_horizontal = 8
alignment = 2

[node name="Money" type="Label" parent="UI/HUD/Earnings" node_paths=PackedStringArray("target_node")]
layout_mode = 2
text = "$0"
horizontal_alignment = 2
script = ExtResource("9_7jqyl")
target_node = NodePath("../../../../Car")
prefix = "$"
stat_to_track = "money"

[node name="Multiplier" type="Label" parent="UI/HUD/Earnings" node_paths=PackedStringArray("target_node")]
layout_mode = 2
text = "x1.0"
horizontal_alignment = 2
script = ExtResource("9_7jqyl")
target_node = NodePath("../../../../Car")
prefix = "x"
stat_to_track = "multiplier"
factor = 1000.0

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="." node_paths=PackedStringArray("car")]
stream = SubResource("AudioStreamSynchronized_tv7ir")
volume_db = -4.0
autoplay = true
bus = &"Music"
script = ExtResource("12_sui6v")
car = NodePath("../Car")
speed_thresholds = Array[float]([200.0, 600.0])
tween_time = 2.0

[connection signal="run_ended" from="Car" to="." method="end_run"]
